<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Chinese&nbsp;Morphological&nbsp;Analyzer(Chen): Document of the Chinese Morphological Analyzer(Chen)</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Document of the Chinese Morphological Analyzer(Chen)</h1>
<p>
<h3 align="center">Vernkin&nbsp;Chen </h3><b>CMA</b> (Chinese Morphological Analyzer) is a platform-independent C++ library for Chinese word segmentation and POS tagging. And Chinese Morphological Analyzer(Chen) is using Maxent Model and Character-baed Segmentation to perform segmentation and POS tagging.<h2><a class="anchor" name="compilefile">
Compile the file</a></h2>
<ol>
<li>
Using shell, go to the project root directory. </li>
<li>
Type ".mkdir build ". </li>
<li>
Type ".cd build ". </li>
<li>
Under linux, type "cmake ../source"; Under windows, run in the msys, type "cmake -G "Unix Makefiles" ../source ". </li>
<li>
Finally Type ".make ". to compile all the source. </li>
</ol>
<p>
If the external program uses the library, simply add all the header files in the $include$ directory under the project root directory, and add the lib/libcmac.a into the library path.<h2><a class="anchor" name="runtrainer">
Run the Trainer</a></h2>
The dataset have to be trained by the Trainer. The Trainer is a executable file with name camctrainer under directory bin.<p>
The SYNOPSIS for the trainer is: <br>
 ./cmactrainer mateFile cateFile [encoding] [posDelimiter] <br>
<p>
<br>
The Description for the parameters: <ul>
<li>
mateFile is the material file, it should be in the form word1/pos1 word2/pos2 word3/pos3 ... </li>
<li>
cateFile is the category file, there are several files are created after the training, and with cateFile as the prefix, prefix should contains both path and name, such /dir1/dir2/n1. </li>
<li>
encoding is the encoding of the mateFile, and gb2312 is the default encoding. Only support gb2312 and big5 now. </li>
<li>
posDelimiter is the delimiter between the word and the pos tag, like '/' and '_' and default is '/'. </li>
</ul>
<p>
Take "/dir1/dir2/cate " as the cateFile, after the training. The following files are created (All under directory /dir1/dir2): <ol>
<li>
cate.model is the POS statistical model file. </li>
<li>
cate.pos is the all the POS gained from the training dataset. </li>
<li>
cate.dic is the dictionary (include words and POS tags) gained from the training dataset. This file is plain text and should be loaded as user dictionary. To convert it to the system dictionary, use Knowledge::encodeSystemDict(const char* txtFileName, const char* binFileName), then the binFileName can be loaded as the system dictioanry. </li>
<li>
cate-poc.model is the POC statistical model file. </li>
</ol>
<p>
All the files are required to run the program.<br>
<h2><a class="anchor" name="rundemo">
Run the Demo</a></h2>
After the training, you can run the demo to segment the file, The Demo is a executable file with name camcsegger under directory bin.<p>
The SYNOPSIS for the trainer is: <br>
 ./cmacsegger cateFile inFile outFile [encoding] [posDelimiter] <br>
<p>
<br>
The Description for the parameters: <ul>
<li>
cateFile is the category file, there are several files are created after the training, and with cateFile as the prefix, prefix should contains both path and name, such /dir1/dir2/n1. </li>
<li>
inFile the input file. </li>
<li>
outFile the output file. </li>
<li>
encoding is the encoding of the mateFile, and gb2312 is the default encoding. Only support gb2312 and big5 now. </li>
<li>
posDelimiter is the delimiter between the word and the pos tag, like '/' and '_' and default is '/'. </li>
</ul>
<p>
The result with pos tagging can be found in the outFile.<h2><a class="anchor" name="useapi">
Use the API</a></h2>
First of the all, add the lib/libcmac.a into the library path.<p>
<em>Step 1: Include the header files in directory "include"</em> <div class="fragment"><pre class="fragment"><span class="preprocessor">#include "<a class="code" href="cma__factory_8h.html" title="CMA_Factory creates instances for Chinese morphological analysis.">cma_factory.h</a>"</span>
<span class="preprocessor">#include "<a class="code" href="analyzer_8h.html" title="Analyzer executes the Chinese morphological analysis.">analyzer.h</a>"</span>
<span class="preprocessor">#include "<a class="code" href="knowledge_8h.html" title="Knowledge manages the linguistic information for Chinese morphological analysis.">knowledge.h</a>"</span>
<span class="preprocessor">#include "<a class="code" href="sentence_8h.html" title="Sentence saves the results of Chinese morphological analysis.">sentence.h</a>"</span>
</pre></div><p>
<em>Step 2: Use the library name space</em> <div class="fragment"><pre class="fragment"><span class="keyword">using namespace </span>cma;
</pre></div><p>
<em>Step 3: Call the interface and handle the result</em><p>
<div class="fragment"><pre class="fragment"><span class="comment">// create instances</span>
CMA_Factory* factory = CMA_Factory::instance();
Analyzer* analyzer = factory-&gt;createAnalyzer();
Knowledge* knowledge = factory-&gt;createKnowledge();

<span class="comment">//It is suggested to set encoding after crate the Knowledge. Another supported encode type is big5.</span>
knowledge-&gt;setEncodeType(Knowledge::ENCODE_TYPE_GB2312);

<span class="comment">// If use /dir1/dir2/cate as the cateFile in the trainer (see section "Run the Trainer" </span>
<span class="comment">// in this webpage), the parameter for loadStatModel is /dir1/dir2/cate-poc and for the </span>
<span class="comment">// loadPOSModel is /dir1/dir2/cate.</span>

<span class="comment">// load POC statistical model</span>
knowledge-&gt;loadStatModel(<span class="stringliteral">"..."</span>);
<span class="comment">// loadPOSModel has to be invoked before loading XXX Dictionaries</span>
knowledge-&gt;loadPOSModel(<span class="stringliteral">"..."</span>);

<span class="comment">// (optional) load dictionaries</span>
knowledge-&gt;loadSystemDict(<span class="stringliteral">"..."</span>);
knowledge-&gt;loadUserDict(<span class="stringliteral">"..."</span>);
knowledge-&gt;loadStopWordDict(<span class="stringliteral">"..."</span>);
 
<span class="comment">// (optional) if POS tagging is not needed, call the function below to turn off the analysis and </span>
<span class="comment">// output for POS tagging, so that large execution time could be saved when execute </span>
<span class="comment">// Analyzer::runWithSentence(), Analyzer::runWithString(), Analyzer::runWithStream().</span>
analyzer-&gt;setOption(Analyzer::OPTION_TYPE_POS_TAGGING, 0);

<span class="comment">// (optional) set the number of N-best results,</span>
<span class="comment">// if this function is not called, one-best analysis is performed defaultly on Analyzer::runWithSentence().</span>
analyzer-&gt;setOption(Analyzer::OPTION_TYPE_NBEST, 5);

<span class="comment">// set knowledge</span>
analyzer-&gt;setKnowledge(knowledge);

<span class="comment">// 1. analyze a paragraph</span>
<span class="keyword">const</span> <span class="keywordtype">char</span>* result = analyzer-&gt;runWithString(<span class="stringliteral">"..."</span>);
...

<span class="comment">// 2. analyze a file</span>
analyzer-&gt;runWithStream(<span class="stringliteral">"..."</span>, <span class="stringliteral">"..."</span>);

<span class="comment">// 3. split paragraphs into sentences</span>
<span class="keywordtype">string</span> line;
vector&lt;Sentence&gt; sentVec;
<span class="keywordflow">while</span>(getline(cin, line)) <span class="comment">// get paragraph string from standard input</span>
{
    sentVec.clear(); <span class="comment">// remove previous sentences</span>
    analyzer-&gt;splitSentence(line.c_str(), sentVec);
    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i=0; i&lt;sentVec.size(); ++i)
    {
        analyzer-&gt;runWithSentence(sentVec[i]); <span class="comment">// analyze each sentence</span>
        ...
    }
}

<span class="comment">// destroy instances</span>
<span class="keyword">delete</span> knowledge;
<span class="keyword">delete</span> analyzer;
</pre></div> </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Jun 23 11:27:50 2009 for Chinese&nbsp;Morphological&nbsp;Analyzer(Chen) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
