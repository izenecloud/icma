<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ChineseMorphologicalAnalyzer(Chen): maxent::MaxentModel Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespacemaxent.html">maxent</a>::<a class="el" href="classmaxent_1_1MaxentModel.html">MaxentModel</a>
  </div>
</div>
<div class="contents">
<h1>maxent::MaxentModel Class Reference</h1><!-- doxytag: class="maxent::MaxentModel" --><code>#include &lt;<a class="el" href="maxentmodel_8hpp-source.html">maxentmodel.hpp</a>&gt;</code>
<p>

<p>
<a href="classmaxent_1_1MaxentModel-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5b6785a01b3fee74727008d5a886f8f6"></a><!-- doxytag: member="maxent::MaxentModel::feature_type" ref="5b6785a01b3fee74727008d5a886f8f6" args="" -->
typedef me::feature_type&nbsp;</td><td class="memItemRight" valign="bottom"><b>feature_type</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2ba8c0cf9345ae28f0f91888aa74a5d5"></a><!-- doxytag: member="maxent::MaxentModel::outcome_type" ref="2ba8c0cf9345ae28f0f91888aa74a5d5" args="" -->
typedef me::feature_type&nbsp;</td><td class="memItemRight" valign="bottom"><b>outcome_type</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1b55d71ee52510901392f7eec02b811e"></a><!-- doxytag: member="maxent::MaxentModel::context_type" ref="1b55d71ee52510901392f7eec02b811e" args="" -->
typedef std::vector&lt; pair<br>
&lt; feature_type, float &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>context_type</b></td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#296812cede62282a6fde6ee094a44ee7">MaxentModel</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#582a2464c1e72f3c3b6eb9c83a2ca891">load</a> (const string &amp;model)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#2aa87cdaab39cd5cdf6514b630e7e098">save</a> (const string &amp;model, bool binary=false) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#4169b85fbda2c210e23007f6e304dac4">eval</a> (const context_type &amp;context, const outcome_type &amp;outcome) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#e909735d4e37ca6254d28680277a1bbc">eval_all</a> (const context_type &amp;context, std::vector&lt; pair&lt; outcome_type, double &gt; &gt; &amp;outcomes, bool sort_result=true) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">outcome_type&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#afd2cd8c670a518fd6751749f8a66040">predict</a> (const context_type &amp;context) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#1a5aa55ae1020f7ac15ff7c4e7f94d9d">begin_add_event</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#8e4dafefc0ec8e8daaeb70e603c54dfe">add_event</a> (const context_type &amp;context, const outcome_type &amp;outcome, size_t count=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d67dadb84f2b587d598de74e76914db8"></a><!-- doxytag: member="maxent::MaxentModel::add_heldout_event" ref="d67dadb84f2b587d598de74e76914db8" args="(const context_type &amp;context, const outcome_type &amp;outcome, size_t count=1)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>add_heldout_event</b> (const context_type &amp;context, const outcome_type &amp;outcome, size_t count=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#7f80709166a73df5f32e242afc18d96c">add_event</a> (const vector&lt; string &gt; &amp;context, const outcome_type &amp;outcome, size_t count=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="56d8de52ed22f3355b3a542a68b1976b"></a><!-- doxytag: member="maxent::MaxentModel::add_heldout_event" ref="56d8de52ed22f3355b3a542a68b1976b" args="(const vector&lt; string &gt; &amp;context, const outcome_type &amp;outcome, size_t count=1)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>add_heldout_event</b> (const vector&lt; string &gt; &amp;context, const outcome_type &amp;outcome, size_t count=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#e3afac23eb01c9e40cc9c3eaf4e9578c">eval</a> (const vector&lt; string &gt; &amp;context, const outcome_type &amp;outcome) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#06daf6b54be28b74da8cf7baf50f9a93">eval_all</a> (const vector&lt; string &gt; &amp;context, std::vector&lt; pair&lt; outcome_type, double &gt; &gt; &amp;outcomes, bool sort_result=true) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">outcome_type&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#fe2c011a97263cbf923fdd499da3383f">predict</a> (const vector&lt; string &gt; &amp;context) const </td></tr>

<tr><td class="memTemplParams" nowrap colspan="2">template&lt;typename Iterator&gt; </td></tr>
<tr><td class="memTemplItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#87e6e20d60dcef55448a5583b366bde7">add_events</a> (Iterator begin, Iterator end)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#a92aecda7a8d56e471d273d222f1f92a">end_add_event</a> (size_t cutoff=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmaxent_1_1MaxentModel.html#a260e12fb9bbba9ba593819015678313">train</a> (size_t iter=15, const std::string &amp;method=&quot;lbfgs&quot;, double sigma2=0.0, double tol=1E-05)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0144e3fb9a46640a4a987e9b61b4db11"></a><!-- doxytag: member="maxent::MaxentModel::dump_events" ref="0144e3fb9a46640a4a987e9b61b4db11" args="(const string &amp;model, bool binary=false) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>dump_events</b> (const string &amp;model, bool binary=false) const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5db8afd2f340a19cdb9305d29c8f0bb6"></a><!-- doxytag: member="maxent::MaxentModel::__str__" ref="5db8afd2f340a19cdb9305d29c8f0bb6" args="() const " -->
const char *&nbsp;</td><td class="memItemRight" valign="bottom"><b>__str__</b> () const </td></tr>

<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="301cd211a6b037e4ca0150871ae601e5"></a><!-- doxytag: member="maxent::MaxentModel::maxent_pickle_suite" ref="301cd211a6b037e4ca0150871ae601e5" args="" -->
struct&nbsp;</td><td class="memItemRight" valign="bottom"><b>maxent_pickle_suite</b></td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>cmp_outcome</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>cutoffed_event</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>featid_hasher</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>param_hasher</b></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This class implements a conditional Maximun Entropy Model.<p>
A conditional Maximun Entropy Model (also called log-linear model)has the form: <img class="formulaInl" alt="$p(y|x)=\frac{1}{Z(x)} \exp \left[\sum_{i=1}^k\lambda_if_i(x,y) \right]$" src="form_2.png"> Where x is a context and y is the outcome tag and p(y|x) is the conditional probability.<p>
Normally the context x is composed of a set of contextual predicates. <hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="296812cede62282a6fde6ee094a44ee7"></a><!-- doxytag: member="maxent::MaxentModel::MaxentModel" ref="296812cede62282a6fde6ee094a44ee7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">maxent::MaxentModel::MaxentModel           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default constructor for <a class="el" href="classmaxent_1_1MaxentModel.html">MaxentModel</a>.<p>
Construct an empty <a class="el" href="classmaxent_1_1MaxentModel.html">MaxentModel</a> instance 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="582a2464c1e72f3c3b6eb9c83a2ca891"></a><!-- doxytag: member="maxent::MaxentModel::load" ref="582a2464c1e72f3c3b6eb9c83a2ca891" args="(const string &amp;model)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::load           </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>model</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Load a <a class="el" href="classmaxent_1_1MaxentModel.html">MaxentModel</a> from a file.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>model</em>&nbsp;</td><td>The name of the model to load </td></tr>
  </table>
</dl>

<p>Referenced by <a class="el" href="CMAPOSTagger_8cc-source.html#l00138">cma::POSTagger::POSTagger()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2aa87cdaab39cd5cdf6514b630e7e098"></a><!-- doxytag: member="maxent::MaxentModel::save" ref="2aa87cdaab39cd5cdf6514b630e7e098" args="(const string &amp;model, bool binary=false) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::save           </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>binary</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Save a <a class="el" href="classmaxent_1_1MaxentModel.html">MaxentModel</a> to a file.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>model</em>&nbsp;</td><td>The name of the model to save. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>binary</em>&nbsp;</td><td>If true, the file is saved in binary format, which is usually smaller (if compiled with libz) and much faster to load. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="4169b85fbda2c210e23007f6e304dac4"></a><!-- doxytag: member="maxent::MaxentModel::eval" ref="4169b85fbda2c210e23007f6e304dac4" args="(const context_type &amp;context, const outcome_type &amp;outcome) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double maxent::MaxentModel::eval           </td>
          <td>(</td>
          <td class="paramtype">const context_type &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const outcome_type &amp;&nbsp;</td>
          <td class="paramname"> <em>outcome</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Evaluates a context, return the conditional probability p(y|x).<p>
This method calculates the conditional probability p(y|x) for given x and y.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A list of pair&lt;string, double&gt; indicates names of the contextual predicates and their values which are to be evaluated together. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outcome</em>&nbsp;</td><td>The outcome label for which the conditional probability is calculated. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The conditional probability of p(outcome|context). </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#e909735d4e37ca6254d28680277a1bbc">eval_all()</a> </dd></dl>

<p>Referenced by <a class="el" href="maxentmodel_8cpp-source.html#l00589">eval()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e909735d4e37ca6254d28680277a1bbc"></a><!-- doxytag: member="maxent::MaxentModel::eval_all" ref="e909735d4e37ca6254d28680277a1bbc" args="(const context_type &amp;context, std::vector&lt; pair&lt; outcome_type, double &gt; &gt; &amp;outcomes, bool sort_result=true) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::eval_all           </td>
          <td>(</td>
          <td class="paramtype">const context_type &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; pair&lt; outcome_type, double &gt; &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>outcomes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>sort_result</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Evaluates a context, return the conditional distribution of the context.<p>
This method calculates the conditional probability p(y|x) for each possible outcome tag y.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A list of pair&lt;string, double&gt; indicates the contextual predicates and their values (must be &gt;= 0) which are to be evaluated together. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outcomes</em>&nbsp;</td><td>An array of the outcomes paired with it's probability predicted by the model (the conditional distribution). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sort_result</em>&nbsp;</td><td>Whether or not the returned outcome array is sorted (larger probability first). Default is true.</td></tr>
  </table>
</dl>
TODO: need optimized for large number of outcomes<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#4169b85fbda2c210e23007f6e304dac4">eval()</a> </dd></dl>

<p>Referenced by <a class="el" href="maxentmodel_8cpp-source.html#l00563">eval_all()</a>, and <a class="el" href="maxentmodel_8cpp-source.html#l00441">predict()</a>.</p>

</div>
</div><p>
<a class="anchor" name="afd2cd8c670a518fd6751749f8a66040"></a><!-- doxytag: member="maxent::MaxentModel::predict" ref="afd2cd8c670a518fd6751749f8a66040" args="(const context_type &amp;context) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MaxentModel::outcome_type maxent::MaxentModel::predict           </td>
          <td>(</td>
          <td class="paramtype">const context_type &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Evaluates a context, return the most possible outcome y for given context x<p>
This function is a thin wrapper for <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#e909735d4e37ca6254d28680277a1bbc">eval_all()</a>. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A list of String names of the contextual predicates which are to be evaluated together. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The most possible outcome label for given context. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#e909735d4e37ca6254d28680277a1bbc">eval_all()</a> </dd></dl>

<p>References <a class="el" href="maxentmodel_8cpp-source.html#l00328">eval_all()</a>.</p>

<p>Referenced by <a class="el" href="maxentmodel_8cpp-source.html#l00610">predict()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1a5aa55ae1020f7ac15ff7c4e7f94d9d"></a><!-- doxytag: member="maxent::MaxentModel::begin_add_event" ref="1a5aa55ae1020f7ac15ff7c4e7f94d9d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::begin_add_event           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Signal the begining of adding event (the start of training).<p>
This method must be called before adding any event to the model. It informs the model the beginning of training. After the last event is added <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#a92aecda7a8d56e471d273d222f1f92a">end_add_event()</a> must be called to indicate the ending of adding events. </dd></dl>

</div>
</div><p>
<a class="anchor" name="8e4dafefc0ec8e8daaeb70e603c54dfe"></a><!-- doxytag: member="maxent::MaxentModel::add_event" ref="8e4dafefc0ec8e8daaeb70e603c54dfe" args="(const context_type &amp;context, const outcome_type &amp;outcome, size_t count=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::add_event           </td>
          <td>(</td>
          <td class="paramtype">const context_type &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const outcome_type &amp;&nbsp;</td>
          <td class="paramname"> <em>outcome</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em> = <code>1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add an event (context, outcome, count) to current model for training later.<p>
<a class="el" href="classmaxent_1_1MaxentModel.html#8e4dafefc0ec8e8daaeb70e603c54dfe">add_event()</a> should be called after calling <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#1a5aa55ae1020f7ac15ff7c4e7f94d9d">begin_add_event()</a>. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A std::vector of pair&lt;std::string, float&gt; to indicate the context predicates and their values (must be &gt;= 0) occured in the event. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outcome</em>&nbsp;</td><td>A std::string indicates the outcome label. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>How many times this event occurs in training set. default = 1 </td></tr>
  </table>
</dl>

<p>Referenced by <a class="el" href="maxentmodel_8cpp-source.html#l00127">add_event()</a>, and <a class="el" href="maxentmodel_8hpp-source.html#l00130">add_events()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7f80709166a73df5f32e242afc18d96c"></a><!-- doxytag: member="maxent::MaxentModel::add_event" ref="7f80709166a73df5f32e242afc18d96c" args="(const vector&lt; string &gt; &amp;context, const outcome_type &amp;outcome, size_t count=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::add_event           </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const outcome_type &amp;&nbsp;</td>
          <td class="paramname"> <em>outcome</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>count</em> = <code>1</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add an event (context, outcome, count) to model for training later.<p>
This function is a thin wrapper for the above <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#4169b85fbda2c210e23007f6e304dac4">eval()</a>, with all feature values omitted (default to 1.0, which is binary feature case).</dd></dl>
<a class="el" href="classmaxent_1_1MaxentModel.html#8e4dafefc0ec8e8daaeb70e603c54dfe">add_event()</a> should be called after calling <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#1a5aa55ae1020f7ac15ff7c4e7f94d9d">begin_add_event()</a>. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A list string names of the context predicates occure in the event. The feature value defaults to 1.0 (binary feature) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outcome</em>&nbsp;</td><td>A std::string indicates the outcome label. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>count</em>&nbsp;</td><td>How many times this event occurs in training set. default = 1 </td></tr>
  </table>
</dl>

<p>References <a class="el" href="maxentmodel_8cpp-source.html#l00104">add_event()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e3afac23eb01c9e40cc9c3eaf4e9578c"></a><!-- doxytag: member="maxent::MaxentModel::eval" ref="e3afac23eb01c9e40cc9c3eaf4e9578c" args="(const vector&lt; string &gt; &amp;context, const outcome_type &amp;outcome) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double maxent::MaxentModel::eval           </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const outcome_type &amp;&nbsp;</td>
          <td class="paramname"> <em>outcome</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Evaluates a context, return the conditional probability p(y|x).<p>
This method calculates the conditional probability p(y|x) for given x and y.<p>
This is a wrapper function for the above <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#4169b85fbda2c210e23007f6e304dac4">eval()</a>, omitting feature values in paramaters (default to 1.0, treated as binary case)</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A list of string names of the contextual predicates to be evaluated together. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outcome</em>&nbsp;</td><td>The outcome label for which the conditional probability is calculated. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The conditional probability of p(outcome|context). </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#e909735d4e37ca6254d28680277a1bbc">eval_all()</a> </dd></dl>

<p>References <a class="el" href="maxentmodel_8cpp-source.html#l00388">eval()</a>.</p>

</div>
</div><p>
<a class="anchor" name="06daf6b54be28b74da8cf7baf50f9a93"></a><!-- doxytag: member="maxent::MaxentModel::eval_all" ref="06daf6b54be28b74da8cf7baf50f9a93" args="(const vector&lt; string &gt; &amp;context, std::vector&lt; pair&lt; outcome_type, double &gt; &gt; &amp;outcomes, bool sort_result=true) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::eval_all           </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; pair&lt; outcome_type, double &gt; &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>outcomes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>sort_result</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Evaluates a context, return the conditional distribution of given context.<p>
This method calculates the conditional probability p(y|x) for each possible outcome tag y.<p>
This function is a thin warpper for the above <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#e909735d4e37ca6254d28680277a1bbc">eval_all()</a> feature values are omitted (defualt to 1.0) for binary feature value case.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A list of string names of the contextual predicates which are to be evaluated together. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outcomes</em>&nbsp;</td><td>an array of the outcomes paired with it's probability predicted by the model (the conditional distribution). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sort_result</em>&nbsp;</td><td>Whether or not the returned outcome array is sorted (larger probability first). Default is true.</td></tr>
  </table>
</dl>
TODO: need optimized for large number of outcomes<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#4169b85fbda2c210e23007f6e304dac4">eval()</a> </dd></dl>

<p>References <a class="el" href="maxentmodel_8cpp-source.html#l00328">eval_all()</a>.</p>

</div>
</div><p>
<a class="anchor" name="fe2c011a97263cbf923fdd499da3383f"></a><!-- doxytag: member="maxent::MaxentModel::predict" ref="fe2c011a97263cbf923fdd499da3383f" args="(const vector&lt; string &gt; &amp;context) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MaxentModel::outcome_type maxent::MaxentModel::predict           </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; string &gt; &amp;&nbsp;</td>
          <td class="paramname"> <em>context</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Evaluates a context, return the most possible outcome y for given context x<p>
This function is a thin wrapper for <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#afd2cd8c670a518fd6751749f8a66040">predict()</a> for binary value case (omitting feature values which default to 1.0)</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>A list of String names of the contextual predicates which are to be evaluated together. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The most possible outcome label for given context. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classmaxent_1_1MaxentModel.html#e909735d4e37ca6254d28680277a1bbc">eval_all()</a> </dd></dl>

<p>References <a class="el" href="maxentmodel_8cpp-source.html#l00441">predict()</a>.</p>

</div>
</div><p>
<a class="anchor" name="87e6e20d60dcef55448a5583b366bde7"></a><!-- doxytag: member="maxent::MaxentModel::add_events" ref="87e6e20d60dcef55448a5583b366bde7" args="(Iterator begin, Iterator end)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Iterator&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::add_events           </td>
          <td>(</td>
          <td class="paramtype">Iterator&nbsp;</td>
          <td class="paramname"> <em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Iterator&nbsp;</td>
          <td class="paramname"> <em>end</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a set of events indicated by range [begin, end). the value type of Iterator must be pair&lt;context_type, outcome_type&gt; 
<p>References <a class="el" href="maxentmodel_8cpp-source.html#l00104">add_event()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a92aecda7a8d56e471d273d222f1f92a"></a><!-- doxytag: member="maxent::MaxentModel::end_add_event" ref="a92aecda7a8d56e471d273d222f1f92a" args="(size_t cutoff=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::end_add_event           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>cutoff</em> = <code>1</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Signal the ending of adding events.<p>
This method must be called after adding of the last event to inform the model the ending of the adding events.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cutoff</em>&nbsp;</td><td>Event cutoff, all events that occurs less than cutoff times will be discussed. Default = 1 (remain all events). Please note this is different from the usual sense of *feature cutoff*. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="a260e12fb9bbba9ba593819015678313"></a><!-- doxytag: member="maxent::MaxentModel::train" ref="a260e12fb9bbba9ba593819015678313" args="(size_t iter=15, const std::string &amp;method=&quot;lbfgs&quot;, double sigma2=0.0, double tol=1E-05)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void maxent::MaxentModel::train           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>iter</em> = <code>15</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>method</em> = <code>&quot;lbfgs&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>sigma2</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>tol</em> = <code>1E-05</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Train a ME model using selected training method.<p>
This is a wapper function for the underline <a class="el" href="classmaxent_1_1Trainer.html">Trainer</a> class. It will create corresponding <a class="el" href="classmaxent_1_1Trainer.html">Trainer</a> object to train a Conditional <a class="el" href="classmaxent_1_1MaxentModel.html">MaxentModel</a>. Currently L-BFGS and GIS are implemented.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>iter</em>&nbsp;</td><td>Specify how many iterations are need for iterative methods. Default is 15 iterations.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>method</em>&nbsp;</td><td>The training method to use. Can be "lbfgs" or "gis". L-BFGS is used as the default training method.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sigma2</em>&nbsp;</td><td>Global variance <img class="formulaInl" alt="$\sigma^2$" src="form_0.png"> in Gaussian prior smoothing. Default is 0, which turns off Gaussian smoothing.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tol</em>&nbsp;</td><td>Tolerance for detecting model convergence. A model is regarded as convergence when <img class="formulaInl" alt="$|\frac{Log-likelihood(\theta_2) - Log-likelihood(\theta_1)}{Log-likelihood(\theta_1)}|<tol$" src="form_1.png">. Default tol = 1-E05 </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>source/maxent/<a class="el" href="maxentmodel_8hpp-source.html">maxentmodel.hpp</a><li>source/maxent/maxentmodel.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Apr 30 11:53:00 2009 for ChineseMorphologicalAnalyzer(Chen) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
